import{b as g}from"../chunks/CfCTUKyv.js";import{f as u,a as p}from"../chunks/CBRNjYjx.js";import{P as A,Q as C,$ as M,T as t,R as c,V as e,a4 as j,a3 as $,j as m}from"../chunks/DTBPtxAS.js";import{s as L}from"../chunks/BSsUy5G-.js";import{i as N}from"../chunks/OIKFh4yV.js";import{e as D}from"../chunks/CPSWb9fA.js";import{d as O,h as P}from"../chunks/dct89_6p.js";import{s as _}from"../chunks/-JXu8JFi.js";import{i as Q}from"../chunks/11e4ofEQ.js";const R=async({fetch:s})=>({librettos:await(await s(`${g}/api/librettos.json`)).json(),fountain:[{id:"away",title:"Come From Away",content:""}]}),at=Object.freeze(Object.defineProperty({__proto__:null,load:R},Symbol.toStringTag,{value:"Module"}));var V=u('<div class="py-12 text-center"><p class="mb-4 text-lg text-gray-500">No librettos yet</p> <a class="rounded-md bg-blue-600 px-6 py-2 text-white transition-colors hover:bg-blue-700">Submit Your First Libretto</a></div>'),Y=(s,a,i)=>{s.preventDefault(),a(m(i).id)},q=u('<div class="relative isolate rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:bg-gray-200 hover:shadow-md dark:border-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700"><h3 class="mb-2 text-xl font-semibold text-gray-800 dark:text-gray-200"><a> <span class="absolute inset-0"></span></a></h3> <div class="flex justify-end gap-2"><button class="z-10 rounded bg-red-600 px-3 py-2 text-sm text-white transition-colors hover:bg-red-700">Delete</button></div></div>'),B=(s,a,i)=>{s.preventDefault(),a(m(i).id)},G=u('<div class="relative isolate rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:bg-gray-200 hover:shadow-md dark:border-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700"><h3 class="mb-2 text-xl font-semibold text-gray-800 dark:text-gray-200"><a> <span class="absolute inset-0"></span></a></h3> <div class="flex justify-end gap-2"><button class="z-10 rounded bg-red-600 px-3 py-2 text-sm text-white transition-colors hover:bg-red-700">Delete</button></div></div>'),H=u('<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"><!> <!></div>'),I=u('<div class="mx-auto max-w-6xl p-8"><div class="mb-8 flex items-center justify-between"><h1 class="text-3xl font-bold text-gray-800 dark:text-gray-200">Libretto Collection</h1> <a class="rounded-md bg-blue-600 px-6 py-2 text-white transition-colors hover:bg-blue-700">New Libretto</a></div> <!></div>');function ot(s,a){A(a,!0);async function i(o){if(confirm("Are you sure you want to delete this libretto?"))try{if(!(await fetch(`${g}/api/librettos/${o}/mutate`,{method:"DELETE"})).ok)throw new Error("Failed to delete libretto");Q()}catch(r){console.error("Error deleting libretto:",r),alert("Failed to delete libretto")}}var x=I();P(o=>{M.title="Librettos - Think System Memorizer"});var y=t(x),E=c(t(y),2);_(E,"href",`${g??""}/librettos/new`),e(y);var z=c(y,2);{var F=o=>{var r=V(),f=c(t(r),2);_(f,"href",`${g??""}/librettos/new`),e(r),p(o,r)},S=o=>{var r=H(),f=t(r);D(f,17,()=>a.data.fountain,l=>l.title,(l,d)=>{var n=q(),v=t(n),b=t(v),w=t(b);j(),e(b),e(v);var h=c(v,2),k=t(h);k.__click=[Y,i,d],e(h),e(n),$(()=>{_(b,"href",`${g??""}/fountain/${m(d).id??""}`),L(w,`${m(d).title??""} `)}),p(l,n)});var T=c(f,2);D(T,17,()=>a.data.librettos,l=>l.title,(l,d)=>{var n=G(),v=t(n),b=t(v),w=t(b);j(),e(b),e(v);var h=c(v,2),k=t(h);k.__click=[B,i,d],e(h),e(n),$(()=>{_(b,"href",`${g??""}/librettos/${m(d).id??""}`),L(w,`${m(d).title??""} `)}),p(l,n)}),e(r),p(o,r)};N(z,o=>{a.data.librettos.length===0?o(F):o(S,!1)})}e(x),p(s,x),C()}O(["click"]);export{ot as component,at as universal};
