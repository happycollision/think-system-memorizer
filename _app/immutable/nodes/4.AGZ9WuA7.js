import{f as r,a,c as qe}from"../chunks/CBRNjYjx.js";import{i as Ve}from"../chunks/CGWnGH77.js";import{P as we,Q as ze,$ as Ae,T as p,V as s,a2 as j,R as c,j as e,a3 as n,k as L,a4 as ce}from"../chunks/DTBPtxAS.js";import{s as l}from"../chunks/BSsUy5G-.js";import{i as v}from"../chunks/OIKFh4yV.js";import{e as q,i as P}from"../chunks/CPSWb9fA.js";import{h as Be}from"../chunks/dct89_6p.js";import{s as ke}from"../chunks/-JXu8JFi.js";import{s as Ee}from"../chunks/RAj_q087.js";import{p as Fe}from"../chunks/CXpxvsFd.js";var Ge=r('<p class="title-value svelte-2jqnp9"> </p>'),He=r('<div class="title-page-item svelte-2jqnp9"><span class="title-key svelte-2jqnp9"> </span> <!></div>'),Ie=r('<div class="title-page svelte-2jqnp9"></div>'),Je=r("<hr/>"),Ke=r('<p class="scene-number-token svelte-2jqnp9"> </p>'),Me=r('<span class="scene-number-inline svelte-2jqnp9"> </span>'),Ne=r('<div class="scene-heading svelte-2jqnp9"> <!></div>'),We=r("<br/>"),Xe=r(" <!>",1),Ye=r("<p></p>"),Ze=r('<p class="character svelte-2jqnp9"> </p>'),$e=r("<br/>"),ea=r(" <!>",1),aa=r('<p class="dialogue svelte-2jqnp9"></p>'),ta=r('<p class="parenthetical svelte-2jqnp9"> </p>'),ra=r('<p class="transition svelte-2jqnp9"> </p>'),sa=r("<br/>"),va=r(" <!>",1),na=r('<p class="note svelte-2jqnp9"><em></em></p>'),oa=r("<br/>"),pa=r(" <!>",1),la=r('<p class="lyric svelte-2jqnp9"><em></em></p>'),_a=r('<!> <div class="scene svelte-2jqnp9"><!> <!></div>',1),ia=r('<!> <div class="scenes"></div>',1),ca=r("<p>Loading screenplay...</p>"),ma=r('<div class="screenplay-container svelte-2jqnp9"><!></div>');function ka(Ce,be){we(be,!1);let Oe=Fe(be,"data",8);const{screenplay:E}=Oe();console.log("Screenplay data:",E),Ve();var me=ma();Be(k=>{Ae.title="Diamonds - Screenplay"});var Se=p(me);{var De=k=>{var X=ia(),ye=j(X);{var Pe=F=>{var G=Ie();q(G,5,()=>Object.entries(E.title_page),([H,Q])=>H,(H,Q)=>{let m=()=>e(Q)[0],R=()=>e(Q)[1];var Y=qe(),Z=j(Y);{var $=I=>{var J=He(),o=p(J),i=p(o);s(o);var ee=c(o,2);q(ee,1,R,P,(ae,te)=>{var t=Ge(),fe=p(t,!0);s(t),n(()=>l(fe,e(te))),a(ae,t)}),s(J),n(ae=>l(i,`${ae??""}:`),[()=>m().replace(/_/g," ").toUpperCase()],L),a(I,J)};v(Z,I=>{R()&&R().length>0&&I($)})}a(H,Y)}),s(G),a(F,G)};v(ye,F=>{Object.keys(E.title_page).length>0&&F(Pe)})}var je=c(ye,2);q(je,5,()=>E.scenes,P,(F,G,H)=>{var Q=_a();const m=L(()=>e(G));var R=j(Q);{var Y=o=>{var i=Je();a(o,i)};v(R,o=>{H>0&&o(Y)})}var Z=c(R,2),$=p(Z);{var I=o=>{var i=Ke(),ee=p(i,!0);s(i),n(()=>l(ee,e(m).scene_number_token)),a(o,i)};v($,o=>{e(m).scene_number_token&&e(m).elements.length>0&&e(m).elements[0].type!=="scene_heading"&&o(I)})}var J=c($,2);q(J,1,()=>e(m).elements,P,(o,i,ee,ae)=>{var te=qe();const t=L(()=>e(i));var fe=j(te);{var Qe=T=>{var K=Ne(),re=p(K),de=c(re);{var f=_=>{var d=Me(),M=p(d,!0);s(d),n(()=>l(M,e(t).scene_number)),a(_,d)};v(de,_=>{e(t).scene_number&&e(t).scene_number!==e(m).scene_number_token&&_(f)})}s(K),n(()=>l(re,`${e(t).text??""} `)),a(T,K)},Re=(T,K)=>{{var re=f=>{var _=Ye();const d=L(()=>e(t).text.split(`
`));q(_,5,()=>e(d),P,(M,g,C)=>{ce();var U=Xe(),se=j(U,!0),u=c(se);{var x=h=>{var N=We();a(h,N)};v(u,h=>{C<e(d).length-1&&h(x)})}n(()=>l(se,e(g))),a(M,U)}),s(_),n(()=>Ee(_,1,`action ${e(t).isCentered?"centered":""}`,"svelte-2jqnp9")),a(f,_)},de=(f,_)=>{{var d=g=>{var C=Ze(),U=p(C,!0);s(C),n(()=>l(U,e(t).name)),a(g,C)},M=(g,C)=>{{var U=u=>{var x=aa();const h=L(()=>e(t).text.split(`
`));q(x,5,()=>e(h),P,(N,b,O)=>{ce();var V=ea(),ve=j(V,!0),y=c(ve);{var S=D=>{var ge=$e();a(D,ge)};v(y,D=>{O<e(h).length-1&&D(S)})}n(()=>l(ve,e(b))),a(N,V)}),s(x),n(()=>ke(x,"data-speaking",e(t).character)),a(u,x)},se=(u,x)=>{{var h=b=>{var O=ta(),V=p(O,!0);s(O),n(()=>l(V,e(t).text)),a(b,O)},N=(b,O)=>{{var V=y=>{var S=ra(),D=p(S,!0);s(S),n(()=>l(D,e(t).text)),a(y,S)},ve=(y,S)=>{{var D=w=>{var W=na();const ne=L(()=>e(t).text.split(`
`));var z=p(W);q(z,5,()=>e(ne),P,(A,oe,pe)=>{ce();var le=va(),_e=j(le,!0),ue=c(_e);{var ie=B=>{var xe=sa();a(B,xe)};v(ue,B=>{pe<e(ne).length-1&&B(ie)})}n(()=>l(_e,e(oe))),a(A,le)}),s(z),s(W),a(w,W)},ge=(w,W)=>{{var ne=z=>{var A=la();const oe=L(()=>e(t).text.split(`
`));var pe=p(A);q(pe,5,()=>e(oe),P,(le,_e,ue)=>{ce();var ie=pa(),B=j(ie,!0),xe=c(B);{var Te=he=>{var Ue=oa();a(he,Ue)};v(xe,he=>{ue<e(oe).length-1&&he(Te)})}n(()=>l(B,e(_e))),a(le,ie)}),s(pe),s(A),n(()=>ke(A,"data-speaking",e(t).character)),a(z,A)};v(w,z=>{e(t).type==="lyric"&&z(ne)},W)}};v(y,w=>{e(t).type==="note"?w(D):w(ge,!1)},S)}};v(b,y=>{e(t).type==="transition"?y(V):y(ve,!1)},O)}};v(u,b=>{e(t).type==="parenthetical"?b(h):b(N,!1)},x)}};v(g,u=>{e(t).type==="dialogue"?u(U):u(se,!1)},C)}};v(f,g=>{e(t).type==="character"?g(d):g(M,!1)},_)}};v(T,f=>{e(t).type==="action"?f(re):f(de,!1)},K)}};v(fe,T=>{e(t).type==="scene_heading"?T(Qe):T(Re,!1)})}a(o,te)}),s(Z),a(F,Q)}),s(je),a(k,X)},Le=k=>{var X=ca();a(k,X)};v(Se,k=>{E?k(De):k(Le,!1)})}s(me),a(Ce,me),ze()}export{ka as component};
